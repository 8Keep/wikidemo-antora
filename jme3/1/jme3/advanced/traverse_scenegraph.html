<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Traverse the SceneGraph :: jMonkeyEngine Documentation</title>
    <meta name="keywords" content="spatial, node, mesh, geometry, scenegraph">
    <meta name="generator" content="Antora 2.3.0">
    <link rel="stylesheet" href="../../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">jMonkeyEngine Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jme3" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../documentation.html">Test</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../documentation.html">jMonkeyEngine 3</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Test</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Test</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../documentation.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../documentation.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../documentation.html">Test</a></li>
    <li><a href="traverse_scenegraph.html">Traverse the SceneGraph</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/davisro/dev/wikidemo-antora/docs/modules/ROOT/pages/jme3/advanced/traverse_scenegraph.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Traverse the SceneGraph</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>You can run a search across the whole scene graph and search for individual Spatials (<code>Nodes</code> and `Geometry`s) by custom criteria, such as the Spatial&#8217;s name, or the Spatial&#8217;s class, or the Spatial&#8217;s user data, or Spatial&#8217;s Controls. You do this when you want modify  the found nodes (move them, call a method, etc) but you don&#8217;t have a local variable for them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_use_cases"><a class="anchor" href="#_example_use_cases"></a>Example Use Cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Example 1:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You have created a procedural scene with lots of dynamically generated elements.</p>
</li>
<li>
<p>You want to find individual Spatials under ever-changing conditions and modify their state.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Example 2:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You created a mostly static scene in the jMonkeyEngine SDK and exported it as .j3o file.<br>
The scene also contains interactive objects, for example a particle emitter, spatials with user data, or spatials with custom controls.</p>
</li>
<li>
<p>You load the .j3o scene using the assetManager.</p>
</li>
<li>
<p>You want to interact with one of the loaded interactive scene elements in your Java code.<br>
For example, you want to call <code>emitAllParticles()</code> on the particle emitter. Or you want to find all NPC&#8217;s Geometries with a custom CivilianControl, and call the CivilianControl method that makes them start acting their role.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this case, you can use a SceneGraphVisitorAdapter to identify and access the Spatials in question.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_sample"><a class="anchor" href="#_code_sample"></a>Code Sample</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For each search, you create a <code>com.jme3.scene.SceneGraphVisitorAdapter</code> that defines your search criteria and what you want to do with the found Spatials. Then you call the <code>depthFirstTraversal(visitor)</code> or <code>breadthFirstTraversal(visitor)</code> method of the Spatial (e.g. the rootNode, or better, a subnode) to start the search.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SceneGraphVisitor visitor = new SceneGraphVisitor() {

  @Override
  public void visit(Spatial spatial) {
    // search criterion can be control class:
    MyControl control = spatial.getControl(MyControl.class);
    if (control != null) {
      // you have access to any method, e.g. name.
      System.out.println("Instance of " + control.getClass().getName()
                       + " found for " + spatial.getName());
    }
  }

};

// Now scan the tree either depth first...
rootNode.depthFirstTraversal(visitor);
// ... or scan it breadth first.
rootNode.breadthFirstTraversal(visitor);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which of the two methods is faster depends on how you designed the scengraph, and what tree element you are looking for. If you are searching for one single Geometry that is a â€œleaf of the tree, and then stop searching, depth-first may be faster. If you search for a high-level grouping Node, breadth-first may be faster.</p>
</div>
<div class="paragraph">
<p>The choice of depth- vs breadth-first also influences the order in which found elements are returned (children first or parents first). If you want to modify user data that is inherited from the parent node (e.g. transformations), the order of application is important, because the side-effects add up.</p>
</div>
<div class="paragraph">
<p>You can use the SceneGraphVisitorAdapter class to scan separately for Geometry and Nodes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also"><a class="anchor" href="#_see_also"></a>See Also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../the_scene_graph.html" class="page">The Scene Graph</a></p>
</li>
<li>
<p><a href="spatial.html" class="page">Spatial</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
